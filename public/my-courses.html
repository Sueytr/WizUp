<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>My Courses - WizUP</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    /* Enhanced animations */
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    .animate-in { animation: slideIn 0.5s ease-out; }
    .pulse-hover:hover { animation: pulse 0.3s ease-in-out; }
    
    body{
      font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      margin:0;
      background:url('../bg1.jpg')center/cover no-repeat fixed;
      color:#fff;
      min-height:100vh;
    }
    .wrap{
      padding:24px;
      max-width:1200px;
      margin:36px auto;
    }
    .card{
      background:linear-gradient(135deg, rgba(15,23,42,0.85), rgba(30,41,59,0.8));
      backdrop-filter:blur(20px);
      border:1px solid rgba(148,163,184,0.2);
      padding:24px;
      border-radius:20px;
      box-shadow:0 20px 50px rgba(0,0,0,0.3);
      transition:all 0.3s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow:0 30px 70px rgba(0,0,0,0.4);
    }
    a.back{
      color:#fff;
      text-decoration:none;
      font-weight:700;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:12px 16px;
      background:rgba(255,255,255,0.1);
      border-radius:12px;
      transition:all 0.3s ease;
    }
    a.back:hover {
      background:rgba(255,255,255,0.2);
      transform: translateX(-5px);
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
      gap:20px;
      margin-top:24px;
    }
    .course{
      background:linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      padding:20px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,0.2);
      transition:all 0.3s ease;
      position:relative;
      overflow:hidden;
    }
    .course::before {
      content:'';
      position:absolute;
      top:0;
      left:-100%;
      width:100%;
      height:100%;
      background:linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition:left 0.5s ease;
    }
    .course:hover::before {
      left:100%;
    }
    .course:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow:0 15px 35px rgba(0,0,0,0.2);
      border-color:rgba(255,255,255,0.3);
    }
    .course h3 {
      margin:0 0 12px 0;
      font-size:18px;
      font-weight:700;
      color:#fff;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .course .status-badge {
      display:inline-block;
      padding:4px 8px;
      border-radius:20px;
      font-size:11px;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:0.5px;
    }
    .status-excellent {
      background:linear-gradient(135deg, #27ae60, #2ecc71);
      color:#fff;
    }
    .status-good {
      background:linear-gradient(135deg, #3498db, #5dade2);
      color:#fff;
    }
    .status-average {
      background:linear-gradient(135deg, #f39c12, #f1c40f);
      color:#fff;
    }
    .status-risk {
      background:linear-gradient(135deg, #e74c3c, #c0392b);
      color:#fff;
    }
    .course .details {
      margin:12px 0;
      font-size:14px;
      color:rgba(255,255,255,0.8);
      line-height:1.5;
    }
    .course .attendance-bar {
      margin:12px 0;
      height:8px;
      background:rgba(255,255,255,0.1);
      border-radius:10px;
      overflow:hidden;
    }
    .course .attendance-fill {
      height:100%;
      border-radius:10px;
      transition:width 0.5s ease;
    }
    .course .action-link {
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 16px;
      background:linear-gradient(135deg, #667eea, #764ba2);
      color:#fff;
      text-decoration:none;
      border-radius:12px;
      font-weight:600;
      font-size:13px;
      transition:all 0.3s ease;
      margin-top:12px;
    }
    .course .action-link:hover {
      transform: translateY(-2px);
      box-shadow:0 8px 20px rgba(102,126,234,0.3);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <a class="back" href="student-dashboard.html"><i class="fa-solid fa-arrow-left"></i> Back to Dashboard</a>
    <div class="card">
      <h1>My Courses & Lecture Plan</h1>
      <p>Overview of subjects and quick links.</p>
      <div class="grid" id="grid"></div>
    </div>
  </div>
  <script>
    (function(){try{const raw=localStorage.getItem('wizup.currentUser');if(!raw)window.location.href='student-signin.html'}catch(e){window.location.href='student-signin.html'}})();
    (function(){
      var g=document.getElementById('grid');
      if(window.WIZUP_SUBJECTS){
        renderCourses(window.WIZUP_SUBJECTS);
      }else{
        var s=document.createElement('script');
        s.src='wizup-data.js';
        s.onload=function(){
          renderCourses(window.WIZUP_SUBJECTS);
        };
        document.head.appendChild(s);
      }
      
      function renderCourses(subjects){
        g.innerHTML='';
        subjects.forEach(function(su, index){
          var attendance = (su.attended / su.total * 100).toFixed(1);
          var statusClass = '';
          var statusText = '';
          var fillColor = '';
          
          if(attendance >= 85){
            statusClass = 'status-excellent';
            statusText = 'Excellent';
            fillColor = '#27ae60';
          }else if(attendance >= 75){
            statusClass = 'status-good';
            statusText = 'Good';
            fillColor = '#3498db';
          }else if(attendance >= 70){
            statusClass = 'status-average';
            statusText = 'Average';
            fillColor = '#f39c12';
          }else{
            statusClass = 'status-risk';
            statusText = 'At Risk';
            fillColor = '#e74c3c';
          }
          
          var c=document.createElement('div');
          c.className='course animate-in pulse-hover';
          c.style.animationDelay = (index * 0.1) + 's';
          c.innerHTML=
            '<h3>' + su.name + '<span class="status-badge ' + statusClass + '">' + statusText + '</span></h3>' +
            '<div class="details">Total Lectures: ' + su.total + ' | Attended: ' + su.attended + ' | Attendance: ' + attendance + '%</div>' +
            '<div class="attendance-bar"><div class="attendance-fill" style="width:' + attendance + '%; background:' + fillColor + ';"></div></div>' +
            '<div style="margin-top:16px; display:flex; justify-content:space-between; align-items:center;">' +
              '<div style="font-size:13px; color:rgba(255,255,255,0.7);">Click below for detailed analysis</div>' +
              '<a href="attendance-predictor.html?subject=' + encodeURIComponent(su.name) + '" class="action-link">' +
                '<i class="fa-solid fa-chart-line"></i> Open Predictor' +
              '</a>' +
            '</div>';
          g.appendChild(c);
        });
      }
    })();
  </script>
</body>
</html>
